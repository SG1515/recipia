<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"

      layout:decorate="~{layout}">
<head>
    <style>
        input{
            width : 100%;
            max-width: 700px;
            border:1px solid #000000; font-weight: bold;
        }
    </style>
</head>

<th:bloack layout:fragment="content">

    <body>
    <form method="post" th:object="${hashTagFormDto}" enctype="multipart/form-data">
        <h1>해시태그 페이지</h1>
        <div>
            <input th:type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        </div>
        <div>
            <input th:type="text"  th:field="*{tagContent}" placeholder="재료를 입력하시오.">
        </div>
        <div>
            <button type="submit">검색</button>
        </div>
    </form>
    <script inline="javascript">
        /*<![CDATA[*/
        const input = document.querySelector('input[name=tagContent]');
        console.log(input);
        var tagify = new Tagify(input);
        tagify.addTags(["banana", "orange", "apple"])
        tagify.on('add', onAddTag) // 태그가 추가되면
            .on('remove', onRemoveTag) // 태그가 제거되면
            .on('input', onInput) // 태그가 입력되고 있을 경우
            .on('invalid', onInvalidTag) // 허용되지 않는 태그일 경우
            .on('click', onTagClick) // 해시 태그 블럭을 클릭할 경우
            .on('focus', onTagifyFocusBlur) // 포커스 될 경우
            .on('blur', onTagifyFocusBlur) // 반대로 포커스를 잃을 경우

            .on('edit:start', onTagEdit) // 입력된 태그 수정을 할 경우

            .on('dropdown:hide dropdown:show', e => console.log(e.type)) // 드롭다운 메뉴가 사라질경우
            .on('dropdown:select', onDropdownSelect) // 드롭다운 메뉴에서 아이템을 선택할 경우


        // tagify 전용 이벤트 리스너 제거 할떄
        tagify.off('add', onAddTag);


        // 이벤트 리스너 콜백 메소드
        function onAddTag(e){
            console.log("onAddTag: ", e.detail);
            console.log("original input value: ", inputElm.value)
        }

        // tag remvoed callback
        function onRemoveTag(e){
            console.log("onRemoveTag:", e.detail, "tagify instance value:", tagify.value)
        }

        function onTagEdit(e){
            console.log("onTagEdit: ", e.detail);
        }

        // invalid tag added callback
        function onInvalidTag(e){
            console.log("onInvalidTag: ", e.detail);
        }

        // invalid tag added callback
        function onTagClick(e){
            console.log(e.detail);
            console.log("onTagClick: ", e.detail);
        }

        function onTagifyFocusBlur(e){
            console.log(e.type, "event fired")
        }

        function onDropdownSelect(e){
            console.log("onDropdownSelect: ", e.detail)
        }

        function onInput(e) {
            console.log("onInput: ", e.detail);

            tagify.loading(true) // 태그 입력하는데 우측에 loader 애니메이션 추가
        }
        /*]]>*/
    </script>
    </body>

</th:bloack>

</html>





